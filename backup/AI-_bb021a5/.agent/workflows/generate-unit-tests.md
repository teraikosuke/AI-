---
description: 指定されたファイルに対して単体テストを自動生成し、実行・検証まで行う。
---
# 単体テスト生成 (Generate Unit Tests)

## Step 1: コンテキスト分析
対象ファイルを読み込み、以下を特定せよ：
- すべてのパブリック関数とクラス
- 各関数の入力パラメータと戻り値の型
- 依存関係（外部モジュール、API呼び出し等）
- 想定されるエッジケース（境界値、null/undefined、例外）

## Step 2: テスト計画の作成
分析結果に基づき、テストケースのリストを作成してユーザーに提示せよ。
各テストケースには以下を含めること：
- テスト対象の関数名
- テストシナリオの説明
- 期待される結果

## Step 3: モック戦略の決定
外部依存関係に対するモック化の方針を決定せよ：
- データベース接続 → モック化必須
- 外部API呼び出し → モック化必須
- ファイルシステム操作 → 状況に応じてモック化

## Step 4: テストコード生成
`tests/` または `__tests__/` ディレクトリに適切なテストファイルを作成せよ。
命名規則: `<filename>.test.ts` または `test_<filename>.py`

## Step 5: 実行と検証 // turbo
テストを実行せよ（`pnpm test` または `pytest`）。
失敗したテストがある場合：
1. エラーログを分析
2. テストコードまたは実装コードを修正
3. 最大3回まで再実行

## Step 6: カバレッジレポート
テストカバレッジを確認し、結果をユーザーに報告せよ。
