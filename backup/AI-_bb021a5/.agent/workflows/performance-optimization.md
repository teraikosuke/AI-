---
description: コードのパフォーマンス分析と最適化を体系的に行う。
---
# パフォーマンス最適化 (Performance Optimization)

## Step 1: ボトルネックの特定
パフォーマンス問題の箇所を特定せよ：
- ユーザーから報告された遅い処理
- プロファイリング結果の分析
- 計算量が高いアルゴリズムの検出

## Step 2: 現状の計測
最適化前のベースラインを計測せよ：
- 実行時間の計測
- メモリ使用量の確認
- CPU使用率の確認
- N+1クエリの検出（DB操作がある場合）

## Step 3: 最適化戦略の立案
以下の観点から最適化案を提示せよ：

### アルゴリズムの改善
- 計算量の削減（O(n²) → O(n log n) など）
- 不要なループの削除
- 早期リターンの活用

### データ構造の最適化
- 適切なデータ構造の選択（Map, Set等）
- キャッシュの導入
- 遅延評価の活用

### I/O最適化
- バッチ処理化
- 並列処理の導入
- 非同期処理の活用

### メモリ最適化
- 不要なオブジェクトの早期解放
- ストリーミング処理の導入
- 大きな配列のチャンク処理

## Step 4: 実装
最もインパクトの大きい最適化から順に実装せよ。
各最適化は個別のコミットとして記録すること。

## Step 5: 効果測定 // turbo
最適化後のパフォーマンスを計測せよ：
- 実行時間の比較
- メモリ使用量の比較
- 改善率の算出

## Step 6: リグレッションテスト // turbo
最適化によって機能が壊れていないことを確認せよ：
```bash
pnpm test
```

## Step 7: 結果報告
最適化結果をユーザーに報告せよ：
- 実施した最適化の内容
- パフォーマンス改善率
- トレードオフ（あれば）
