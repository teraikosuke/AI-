# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Œå…¨ä»•æ§˜æ›¸

## ğŸ“Š æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯**13ãƒ†ãƒ¼ãƒ–ãƒ«ã€188ã‚«ãƒ©ãƒ **ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ“‘ ç›®æ¬¡

1. [ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§](#1-ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§)
2. [ERå›³ï¼ˆãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰](#2-erå›³ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
3. [å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°ä»•æ§˜](#3-å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°ä»•æ§˜)
4. [ç”»é¢åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ç”¨çŠ¶æ³](#4-ç”»é¢åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ç”¨çŠ¶æ³)
5. [ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ææ¡ˆ](#5-ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ææ¡ˆ)
6. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#6-ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)

---

## 1. ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

| # | ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | ä¸»ã‚­ãƒ¼ | å¤–éƒ¨ã‚­ãƒ¼ | ã‚«ãƒ©ãƒ æ•° |
|---|-----------|------|--------|---------|---------|
| 1 | `ad_details` | åºƒå‘Šåª’ä½“å¥‘ç´„ç®¡ç† | id | - | 11 |
| 2 | `candidate_applications` | å¿œå‹Ÿãƒ»é¸è€ƒæƒ…å ± | id | candidate_id, client_id | 42 |
| 3 | `candidate_tasks` | å€™è£œè€…ã‚¿ã‚¹ã‚¯ç®¡ç† | id | candidate_id | 8 |
| 4 | [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) | å€™è£œè€…åŸºæœ¬æƒ…å ± | id | advisor_user_id, partner_user_id | 61 |
| 5 | [clients](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-clients) | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ | id | - | 24 |
| 6 | `goal_daily_targets` | æ—¥æ¬¡ç›®æ¨™ | id | - | 7 |
| 7 | `goal_settings` | ç›®æ¨™è¨­å®šãƒ«ãƒ¼ãƒ« | id | - | 4 |
| 8 | `goal_targets` | æœŸé–“ç›®æ¨™ | id | - | 7 |
| 9 | `kpi_targets` | KPIç›®æ¨™ | id | - | 6 |
| 10 | `placements` | æˆç´„ãƒ»ç´¹ä»‹æ–™ | id | candidate_application_id | 8 |
| 11 | `screening_rules` | ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ« | id | - | 6 |
| 12 | [teleapo](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-teleapo) | ãƒ†ãƒ¬ã‚¢ãƒãƒ­ã‚° | id | candidate_id, caller_user_id | 9 |
| 13 | `users` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† | id | - | 8 |

**åˆè¨ˆ**: 13ãƒ†ãƒ¼ãƒ–ãƒ«ã€188ã‚«ãƒ©ãƒ 

---

## 2. ERå›³ï¼ˆãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name             â”‚           â”‚
â”‚ email            â”‚           â”‚
â”‚ role             â”‚           â”‚
â”‚ password_hash    â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                               â”‚
                               â”‚ advisor_user_id
                               â”‚ partner_user_id
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚ candidates                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)                               â”‚
â”‚ advisor_user_id (FK â†’ users.id)       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”
â”‚ partner_user_id (FK â†’ users.id)       â”‚        â”‚
â”‚ name                                  â”‚        â”‚
â”‚ email                                 â”‚        â”‚
â”‚ phone                                 â”‚        â”‚
â”‚ birth_date                            â”‚        â”‚
â”‚ is_effective_application              â”‚        â”‚
â”‚ is_connected                          â”‚        â”‚
â”‚ first_contact_at                      â”‚        â”‚
â”‚ ...                                   â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                â”‚                                â”‚
                â”‚ candidate_id                   â”‚
                â”‚                                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚           â”‚                                â”‚
    â”‚           â”‚                                â”‚
    â–¼           â–¼                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ candidate_applicationsâ”‚  â”‚ candidate_tasks      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)               â”‚  â”‚ id (PK)              â”‚
â”‚ candidate_id (FK)     â”‚  â”‚ candidate_id (FK)    â”‚
â”‚ client_id (FK)        â”‚â—„â”€â”¤ action_date          â”‚
â”‚ recommended_at        â”‚  â”‚ action_note          â”‚
â”‚ first_interview_at    â”‚  â”‚ is_completed         â”‚
â”‚ offer_at              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ offer_accepted_at     â”‚
â”‚ joined_at             â”‚
â”‚ ...                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ candidate_application_id
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ placements       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚
â”‚ candidate_       â”‚
â”‚ application_id   â”‚
â”‚ (FK)             â”‚
â”‚ fee_amount       â”‚
â”‚ refund_amount    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ clients          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚â—„â”€â”€â”€ client_id (FK)
â”‚ name             â”‚
â”‚ industry         â”‚
â”‚ ...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ teleapo          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚
â”‚ candidate_id (FK)â”‚â”€â”€â”€â–º candidates.id
â”‚ caller_user_id   â”‚â”€â”€â”€â–º users.id
â”‚ called_at        â”‚
â”‚ result           â”‚
â”‚ memo             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ad_details       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚
â”‚ media_name       â”‚
â”‚ contract_amount  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ goal_targets         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)              â”‚
â”‚ scope                â”‚
â”‚ advisor_user_id      â”‚
â”‚ period_id            â”‚
â”‚ targets (JSONB)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ goal_daily_targets   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)              â”‚
â”‚ advisor_user_id      â”‚
â”‚ period_id            â”‚
â”‚ target_date          â”‚
â”‚ targets (JSONB)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ goal_settings        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)              â”‚
â”‚ evaluation_rule_type â”‚
â”‚ evaluation_rule_     â”‚
â”‚ options (JSONB)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ kpi_targets          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)              â”‚
â”‚ target_month         â”‚
â”‚ metric_key           â”‚
â”‚ target_value         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ screening_rules      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)              â”‚
â”‚ min_age              â”‚
â”‚ max_age              â”‚
â”‚ allowed_jlpt_levels  â”‚
â”‚ target_nationalities â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°ä»•æ§˜

### 3.1 `ad_details`ï¼ˆåºƒå‘Šåª’ä½“å¥‘ç´„ï¼‰

**ç”¨é€”**: Indeedã€æ±‚äººãƒœãƒƒã‚¯ã‚¹ãªã©ã®åºƒå‘Šåª’ä½“ã®å¥‘ç´„æƒ…å ±ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | integer | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | media_name | varchar(255) | NO | - | åª’ä½“åï¼ˆIndeedã€æ±‚äººãƒœãƒƒã‚¯ã‚¹ãªã©ï¼‰ |
| 3 | contract_start_date | date | YES | - | å¥‘ç´„é–‹å§‹æ—¥ |
| 4 | contract_end_date | date | YES | - | å¥‘ç´„çµ‚äº†æ—¥ |
| 5 | contract_amount | integer | YES | 0 | å¥‘ç´„é‡‘é¡ï¼ˆå††ï¼‰ |
| 6 | amount_period | varchar(50) | YES | - | é‡‘é¡æœŸé–“ï¼ˆæœˆé¡ã€å¹´é¡ï¼‰ |
| 7 | contract_method | text | YES | - | å¥‘ç´„æ–¹æ³• |
| 8 | renewal_terms | text | YES | - | æ›´æ–°æ¡ä»¶ |
| 9 | memo | text | YES | - | ãƒ¡ãƒ¢ |
| 10 | created_at | timestamptz | YES | now() | ä½œæˆæ—¥æ™‚ |
| 11 | updated_at | timestamptz | YES | now() | æ›´æ–°æ—¥æ™‚ |

**ä½¿ç”¨ç”»é¢**: åºƒå‘Šç®¡ç†ç”»é¢

---

### 3.2 `candidate_applications`ï¼ˆå¿œå‹Ÿãƒ»é¸è€ƒæƒ…å ±ï¼‰

**ç”¨é€”**: å€™è£œè€…ã®ä¼æ¥­ã¸ã®å¿œå‹Ÿæƒ…å ±ã‚’ç®¡ç†ï¼ˆ**KPIè¨ˆç®—ã®ä¸­æ ¸ãƒ†ãƒ¼ãƒ–ãƒ«**ï¼‰

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ | KPIè¨ˆç®—ã§ã®å½¹å‰² |
|---|---------|---------|------|-----------|------|----------------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ | - |
| 2 | candidate_id | bigint | NO | - | å€™è£œè€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ | JOINç”¨ |
| 3 | client_id | bigint | NO | - | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ID | JOINç”¨ |
| 4 | kintone_sub_id | text | YES | - | kintoneã‚µãƒ–ID | - |
| 5 | job_title | text | YES | - | æ±‚äººã‚¿ã‚¤ãƒˆãƒ« | - |
| 8 | apply_route | text | YES | - | å¿œå‹ŸçµŒè·¯ | - |
| 10 | recommended_at | timestamptz | YES | - | æ¨è–¦æ—¥æ™‚ | **æ¨è–¦æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 11 | first_interview_set_at | timestamptz | YES | - | ä¸€æ¬¡é¢æ¥è¨­å®šæ—¥æ™‚ | **é¢æ¥è¨­å®šæ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 12 | first_interview_at | timestamptz | YES | - | ä¸€æ¬¡é¢æ¥å®Ÿæ–½æ—¥æ™‚ | **é¢æ¥å®Ÿæ–½æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 13 | second_interview_set_at | timestamptz | YES | - | äºŒæ¬¡é¢æ¥è¨­å®šæ—¥æ™‚ | ï¼ˆè¿½åŠ ã‚«ã‚¦ãƒ³ãƒˆï¼‰ |
| 14 | second_interview_at | timestamptz | YES | - | äºŒæ¬¡é¢æ¥å®Ÿæ–½æ—¥æ™‚ | ï¼ˆè¿½åŠ ã‚«ã‚¦ãƒ³ãƒˆï¼‰ |
| 15 | offer_date | timestamptz | YES | - | å†…å®šæ—¥æ™‚ï¼ˆæ—§ï¼‰ | - |
| 16 | close_expected_at | timestamptz | YES | - | ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°äºˆå®šæ—¥æ™‚ | - |
| 17 | offer_accept_date | timestamptz | YES | - | æ‰¿è«¾æ—¥æ™‚ï¼ˆæ—§ï¼‰ | - |
| 18 | join_date | timestamptz | YES | - | å…¥ç¤¾æ—¥æ™‚ï¼ˆæ—§ï¼‰ | - |
| 19 | pre_join_withdraw_date | timestamptz | YES | - | å…¥ç¤¾å‰è¾é€€æ—¥æ™‚ | å¤±æ³¨åˆ¤å®š |
| 20 | post_join_quit_date | timestamptz | YES | - | å…¥ç¤¾å¾Œé€€è·æ—¥æ™‚ | æ—©æœŸé€€è·åˆ¤å®š |
| 21 | stage_current | text | YES | - | ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ | ãƒ•ã‚£ãƒ«ã‚¿ |
| 25 | is_quit_30 | boolean | YES | - | 30æ—¥ä»¥å†…é€€è·ãƒ•ãƒ©ã‚° | - |
| 28 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ | **ææ¡ˆæ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 29 | updated_at | timestamptz | NO | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ | - |
| 34 | selection_note | text | YES | - | é¸è€ƒãƒ¡ãƒ¢ | - |
| 39 | pre_join_withdraw_reason | text | YES | - | å…¥ç¤¾å‰è¾é€€ç†ç”± | - |
| 41 | post_join_quit_reason | text | YES | - | å…¥ç¤¾å¾Œé€€è·ç†ç”± | - |
| 42 | recommendation_text | text | YES | - | æ¨è–¦æ–‡ | - |
| 43 | final_interview_set_at | date | YES | - | æœ€çµ‚é¢æ¥è¨­å®šæ—¥ | ï¼ˆè¿½åŠ ã‚«ã‚¦ãƒ³ãƒˆï¼‰ |
| 44 | final_interview_at | date | YES | - | æœ€çµ‚é¢æ¥å®Ÿæ–½æ—¥ | ï¼ˆè¿½åŠ ã‚«ã‚¦ãƒ³ãƒˆï¼‰ |
| 45 | offer_at | date | YES | - | å†…å®šæ—¥ | **å†…å®šæ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 46 | offer_accepted_at | date | YES | - | æ‰¿è«¾æ—¥ | **æ‰¿è«¾æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 47 | joined_at | date | YES | - | å…¥ç¤¾æ—¥ | **å…¥ç¤¾æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 48 | declined_after_offer_at | date | YES | - | å†…å®šå¾Œè¾é€€æ—¥ | å¤±æ³¨åˆ¤å®š |
| 49 | declined_after_offer_reason | text | YES | - | å†…å®šå¾Œè¾é€€ç†ç”± | - |
| 50 | early_turnover_at | date | YES | - | æ—©æœŸé€€è·æ—¥ | æ—©æœŸé€€è·åˆ¤å®š |
| 51 | early_turnover_reason | text | YES | - | æ—©æœŸé€€è·ç†ç”± | - |
| 52 | closing_forecast_at | date | YES | - | ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°äºˆæ¸¬æ—¥ | - |
| 53 | fee | integer | YES | - | ç´¹ä»‹æ–™ | å£²ä¸Šè¨ˆç®— |
| 54 | note | text | YES | - | å‚™è€ƒ | - |

**å¤–éƒ¨ã‚­ãƒ¼**:
- `candidate_id` â†’ [candidates(id)](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) ON DELETE CASCADE
- `client_id` â†’ `clients(id)` ON DELETE CASCADE

**ä½¿ç”¨ç”»é¢**: å€™è£œè€…ç®¡ç†ç”»é¢ã€æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢

---

### 3.3 `candidate_tasks`ï¼ˆå€™è£œè€…ã‚¿ã‚¹ã‚¯ï¼‰

**ç”¨é€”**: å€™è£œè€…ã«å¯¾ã™ã‚‹ã‚¿ã‚¹ã‚¯ï¼ˆæ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãªã©ï¼‰ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | integer | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | candidate_id | integer | NO | - | å€™è£œè€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| 3 | action_date | date | YES | - | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³äºˆå®šæ—¥ |
| 4 | action_note | text | YES | - | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…å®¹ |
| 5 | is_completed | boolean | YES | false | å®Œäº†ãƒ•ãƒ©ã‚° |
| 6 | completed_at | timestamp | YES | - | å®Œäº†æ—¥æ™‚ |
| 7 | created_at | timestamp | YES | now() | ä½œæˆæ—¥æ™‚ |
| 8 | updated_at | timestamp | YES | now() | æ›´æ–°æ—¥æ™‚ |

**å¤–éƒ¨ã‚­ãƒ¼**:
- `candidate_id` â†’ [candidates(id)](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) ON DELETE CASCADE

**ä½¿ç”¨ç”»é¢**: å€™è£œè€…ç®¡ç†ç”»é¢

---

### 3.4 [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13)ï¼ˆå€™è£œè€…åŸºæœ¬æƒ…å ±ï¼‰

**ç”¨é€”**: å€™è£œè€…ã®åŸºæœ¬æƒ…å ±ã‚’ç®¡ç†ï¼ˆ**ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­æ ¸ãƒ†ãƒ¼ãƒ–ãƒ«**ï¼‰

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ | KPIè¨ˆç®—ã§ã®å½¹å‰² |
|---|---------|---------|------|-----------|------|----------------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ | - |
| 2 | kintone_app_id | integer | YES | - | kintoneã‚¢ãƒ—ãƒªID | - |
| 3 | kintone_record_id | integer | YES | - | kintoneãƒ¬ã‚³ãƒ¼ãƒ‰ID | - |
| 4 | candidate_code | text | YES | - | å€™è£œè€…ã‚³ãƒ¼ãƒ‰ | - |
| 5 | advisor_user_id | bigint | YES | - | æ‹…å½“ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ID | **å€‹äººKPIãƒ•ã‚£ãƒ«ã‚¿** |
| 6 | partner_user_id | bigint | YES | - | ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ID | - |
| 8 | name | text | NO | - | æ°å | - |
| 9 | name_kana | text | YES | - | ãƒ•ãƒªã‚¬ãƒŠ | - |
| 10 | gender | text | YES | - | æ€§åˆ¥ | åˆ†æè»¸ |
| 11 | birth_date | date | YES | - | ç”Ÿå¹´æœˆæ—¥ | å¹´é½¢è¨ˆç®— |
| 12 | age | integer | YES | - | å¹´é½¢ | ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚° |
| 13 | final_education | text | YES | - | æœ€çµ‚å­¦æ­´ | - |
| 14 | phone | text | YES | - | é›»è©±ç•ªå· | - |
| 15 | email | text | YES | - | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | - |
| 16 | postal_code | text | YES | - | éƒµä¾¿ç•ªå· | - |
| 17 | address_pref | text | YES | - | éƒ½é“åºœçœŒ | - |
| 18 | address_city | text | YES | - | å¸‚åŒºç”ºæ‘ | - |
| 19 | address_detail | text | YES | - | ä½æ‰€è©³ç´° | - |
| 20 | employment_status | text | YES | - | å°±æ¥­çŠ¶æ³ï¼ˆå°±æ¥­ä¸­ã€é›¢è·ä¸­ï¼‰ | - |
| 21 | current_income | text | YES | - | ç¾åœ¨ã®å¹´å | - |
| 22 | desired_income | text | YES | - | å¸Œæœ›å¹´å | - |
| 23 | first_interview_note | text | YES | - | åˆå›é¢è«‡ãƒ¡ãƒ¢ | - |
| 24 | career_motivation | text | YES | - | è»¢è·å‹•æ©Ÿ | - |
| 25 | desired_location | text | YES | - | å¸Œæœ›å‹¤å‹™åœ° | - |
| 26 | memo | text | YES | - | ãƒ¡ãƒ¢ | - |
| 28 | new_status | text | YES | - | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ãƒ•ã‚£ãƒ«ã‚¿ |
| 30 | first_schedule_fixed_at | timestamptz | YES | - | åˆå›æ—¥ç¨‹ç¢ºå®šæ—¥æ™‚ | - |
| 31 | first_contact_planned_at | timestamptz | YES | - | åˆå›æ¥è§¦äºˆå®šæ—¥æ™‚ | - |
| 32 | first_contact_at | timestamptz | YES | - | åˆå›æ¥è§¦æ—¥æ™‚ | **æ–°è¦é¢è«‡æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 33 | first_interview_attended | boolean | YES | - | åˆå›é¢è«‡å‡ºå¸­ãƒ•ãƒ©ã‚° | **ç€åº§æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 35 | is_effective_application | boolean | YES | - | æœ‰åŠ¹å¿œå‹Ÿãƒ•ãƒ©ã‚° | **æœ‰åŠ¹å¿œå‹Ÿæ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 37 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ | **å¿œå‹Ÿæ—¥æ™‚** |
| 38 | updated_at | timestamptz | NO | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ | - |
| 39 | sms_sent_flag | boolean | YES | - | SMSé€ä¿¡æ¸ˆã¿ãƒ•ãƒ©ã‚° | **SMSé€ä¿¡æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 40 | is_connected | boolean | YES | - | é€šé›»ãƒ•ãƒ©ã‚° | **é€šé›»æ•°ã‚«ã‚¦ãƒ³ãƒˆ** |
| 41 | first_call_at | timestamp | YES | - | åˆå›æ¶é›»æ—¥æ™‚ | - |
| 43 | skills | text | YES | - | ã‚¹ã‚­ãƒ« | - |
| 44 | personality | text | YES | - | äººæŸ„ãƒ»æ€§æ ¼ | - |
| 45 | work_experience | text | YES | - | è·å‹™çµŒæ­´ | - |
| 46 | contact_preferred_time | text | YES | - | é€£çµ¡å¸Œæœ›æ™‚é–“å¸¯ | - |
| 47 | mandatory_interview_items | text | YES | - | å¿…é ˆãƒ’ã‚¢ãƒªãƒ³ã‚°é …ç›® | - |
| 48 | apply_company_name | text | YES | - | å¿œå‹Ÿä¼æ¥­å | - |
| 49 | apply_job_name | text | YES | - | å¿œå‹Ÿè·ç¨®å | - |
| 50 | apply_route_text | text | YES | - | å¿œå‹ŸçµŒè·¯ãƒ†ã‚­ã‚¹ãƒˆ | åˆ†æè»¸ |
| 51 | application_note | text | YES | - | å¿œå‹Ÿãƒ¡ãƒ¢ | - |
| 52 | desired_job_type | text | YES | - | å¸Œæœ›è·ç¨® | - |
| 53 | career_reason | text | YES | - | è»¢è·ç†ç”± | - |
| 54 | transfer_timing | text | YES | - | è»¢è·æ™‚æœŸ | - |
| 55 | other_selection_status | text | YES | - | ä»–ç¤¾é¸è€ƒçŠ¶æ³ | - |
| 56 | interview_preferred_date | text | YES | - | é¢è«‡å¸Œæœ›æ—¥ | - |
| 57 | recommendation_text | text | YES | - | æ¨è–¦æ–‡ | - |
| 58 | nationality | varchar(100) | YES | - | å›½ç± | ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚° |
| 59 | japanese_level | varchar(10) | YES | - | æ—¥æœ¬èªãƒ¬ãƒ™ãƒ«ï¼ˆN1ã€N2ãªã©ï¼‰ | ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚° |
| 60 | next_action_date | date | YES | - | æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ—¥ | ã‚¿ã‚¹ã‚¯ç®¡ç† |
| 61 | next_action_note | text | YES | - | æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…å®¹ | - |

**å¤–éƒ¨ã‚­ãƒ¼**:
- `advisor_user_id` â†’ `users(id)`
- `partner_user_id` â†’ `users(id)`

**ä½¿ç”¨ç”»é¢**: å€™è£œè€…ç®¡ç†ç”»é¢ã€æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ã€ãƒ†ãƒ¬ã‚¢ãƒç®¡ç†ç”»é¢

---

### 3.5 [clients](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-clients)ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ï¼‰

**ç”¨é€”**: ç´¹ä»‹å…ˆä¼æ¥­ã®æƒ…å ±ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | name | text | NO | - | ä¼æ¥­å |
| 3 | industry | text | YES | - | æ¥­ç•Œ |
| 4 | location | text | YES | - | æ‰€åœ¨åœ° |
| 5 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| 6 | updated_at | timestamptz | NO | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ |
| 9 | job_categories | text | YES | - | è·ç¨®ã‚«ãƒ†ã‚´ãƒª |
| 16 | planned_hires_count | integer | YES | 0 | æ¡ç”¨äºˆå®šäººæ•° |
| 23 | salary_range | text | YES | - | çµ¦ä¸ãƒ¬ãƒ³ã‚¸ |
| 24 | must_qualifications | text | YES | - | å¿…é ˆè³‡æ ¼ |
| 25 | nice_qualifications | text | YES | - | æ­“è¿è³‡æ ¼ |
| 26 | desired_locations | text | YES | - | å¸Œæœ›å‹¤å‹™åœ° |
| 27 | personality_traits | text | YES | - | æ±‚ã‚ã‚‹äººç‰©åƒ |
| 28 | required_experience | text | YES | - | å¿…è¦çµŒé¨“ |
| 29 | selection_note | text | YES | - | é¸è€ƒãƒ¡ãƒ¢ |
| 30 | warranty_period | integer | YES | 90 | ä¿è¨¼æœŸé–“ï¼ˆæ—¥æ•°ï¼‰ |
| 31 | contact_name | text | YES | - | æ‹…å½“è€…å |
| 32 | contact_email | text | YES | - | æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ« |
| 33 | fee_details | text | YES | - | æ–™é‡‘è©³ç´° |
| 34 | contract_note | text | YES | - | å¥‘ç´„ãƒ¡ãƒ¢ |

**ä½¿ç”¨ç”»é¢**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†ç”»é¢ã€å€™è£œè€…ç®¡ç†ç”»é¢

---

### 3.6 `goal_daily_targets`ï¼ˆæ—¥æ¬¡ç›®æ¨™ï¼‰

**ç”¨é€”**: æ—¥åˆ¥ã®ç›®æ¨™å€¤ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | advisor_user_id | integer | NO | - | ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ID |
| 3 | period_id | text | NO | - | æœŸé–“IDï¼ˆYYYY-MMå½¢å¼ï¼‰ |
| 4 | target_date | date | NO | - | å¯¾è±¡æ—¥ |
| 5 | targets | jsonb | NO | '{}' | ç›®æ¨™å€¤ï¼ˆJSONï¼‰ |
| 6 | created_at | timestamptz | NO | now() | ä½œæˆæ—¥æ™‚ |
| 7 | updated_at | timestamptz | NO | now() | æ›´æ–°æ—¥æ™‚ |

**targets JSONã®ä¾‹**:
```json
{
  "newInterviewsTarget": 5,
  "proposalsTarget": 4,
  "recommendationsTarget": 3
}
```

**ä½¿ç”¨ç”»é¢**: æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ï¼ˆæ—¥åˆ¥ç›®æ¨™è¨­å®šï¼‰

---

### 3.7 `goal_settings`ï¼ˆç›®æ¨™è¨­å®šãƒ«ãƒ¼ãƒ«ï¼‰

**ç”¨é€”**: ç›®æ¨™è¨­å®šã®è©•ä¾¡ãƒ«ãƒ¼ãƒ«ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | smallint | NO | 1 | ä¸»ã‚­ãƒ¼ |
| 2 | evaluation_rule_type | text | NO | - | è©•ä¾¡ãƒ«ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ï¼ˆmaster-monthç­‰ï¼‰ |
| 3 | evaluation_rule_options | jsonb | NO | '{}' | è©•ä¾¡ãƒ«ãƒ¼ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆJSONï¼‰ |
| 4 | updated_at | timestamptz | NO | now() | æ›´æ–°æ—¥æ™‚ |

**ä½¿ç”¨ç”»é¢**: æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ï¼ˆMSæœŸé–“è¨ˆç®—ï¼‰

---

### 3.8 `goal_targets`ï¼ˆæœŸé–“ç›®æ¨™ï¼‰

**ç”¨é€”**: æœŸé–“åˆ¥ã®ç›®æ¨™å€¤ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | scope | text | NO | - | ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆpersonalã€companyï¼‰ |
| 3 | advisor_user_id | integer | YES | - | ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ID |
| 4 | period_id | text | NO | - | æœŸé–“IDï¼ˆYYYY-MMå½¢å¼ï¼‰ |
| 5 | targets | jsonb | NO | '{}' | ç›®æ¨™å€¤ï¼ˆJSONï¼‰ |
| 6 | created_at | timestamptz | NO | now() | ä½œæˆæ—¥æ™‚ |
| 7 | updated_at | timestamptz | NO | now() | æ›´æ–°æ—¥æ™‚ |

**targets JSONã®ä¾‹**:
```json
{
  "newInterviewsTarget": 50,
  "proposalsTarget": 40,
  "recommendationsTarget": 30,
  "revenueTarget": 500000
}
```

**ä½¿ç”¨ç”»é¢**: æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ï¼ˆæœŸé–“ç›®æ¨™ï¼‰

---

### 3.9 `kpi_targets`ï¼ˆKPIç›®æ¨™ï¼‰

**ç”¨é€”**: æœˆæ¬¡KPIç›®æ¨™ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | integer | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | target_month | varchar(7) | NO | - | å¯¾è±¡æœˆï¼ˆYYYY-MMå½¢å¼ï¼‰ |
| 3 | metric_key | varchar(50) | NO | - | æŒ‡æ¨™ã‚­ãƒ¼ |
| 4 | target_value | numeric(5,1) | YES | - | ç›®æ¨™å€¤ |
| 5 | created_at | timestamp | YES | now() | ä½œæˆæ—¥æ™‚ |
| 6 | updated_at | timestamp | YES | now() | æ›´æ–°æ—¥æ™‚ |

**ä½¿ç”¨ç”»é¢**: æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ï¼ˆç‡ã®ç›®æ¨™è¨­å®šï¼‰

---

### 3.10 `placements`ï¼ˆæˆç´„ãƒ»ç´¹ä»‹æ–™ï¼‰

**ç”¨é€”**: æˆç´„æƒ…å ±ã¨ç´¹ä»‹æ–™ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | candidate_application_id | bigint | NO | - | å¿œå‹ŸIDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| 3 | fee_amount | integer | YES | - | ç´¹ä»‹æ–™é‡‘é¡ï¼ˆå††ï¼‰ |
| 9 | refund_amount | integer | YES | - | è¿”é‡‘é¡ï¼ˆå††ï¼‰ |
| 16 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| 17 | updated_at | timestamptz | NO | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ |
| 19 | order_reported | boolean | YES | false | å—æ³¨å ±å‘Šæ¸ˆã¿ãƒ•ãƒ©ã‚° |
| 20 | refund_reported | boolean | YES | false | è¿”é‡‘å ±å‘Šæ¸ˆã¿ãƒ•ãƒ©ã‚° |

**å¤–éƒ¨ã‚­ãƒ¼**:
- `candidate_application_id` â†’ `candidate_applications(id)` ON DELETE CASCADE

**ä½¿ç”¨ç”»é¢**: æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢ï¼ˆå£²ä¸Šè¨ˆç®—ï¼‰

---

### 3.11 `screening_rules`ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ï¼‰

**ç”¨é€”**: å€™è£œè€…ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ«ãƒ¼ãƒ«ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | integer | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | min_age | integer | YES | 18 | æœ€å°å¹´é½¢ |
| 3 | max_age | integer | YES | 60 | æœ€å¤§å¹´é½¢ |
| 4 | allowed_jlpt_levels | ARRAY | YES | '{N1,N2}' | è¨±å¯ã•ã‚Œã‚‹æ—¥æœ¬èªãƒ¬ãƒ™ãƒ« |
| 5 | updated_at | timestamptz | YES | now() | æ›´æ–°æ—¥æ™‚ |
| 6 | target_nationalities | text | YES | 'æ—¥æœ¬' | å¯¾è±¡å›½ç± |

**ä½¿ç”¨ç”»é¢**: å€™è£œè€…ç®¡ç†ç”»é¢ï¼ˆæœ‰åŠ¹å¿œå‹Ÿåˆ¤å®šï¼‰

---

### 3.12 [teleapo](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-teleapo)ï¼ˆãƒ†ãƒ¬ã‚¢ãƒãƒ­ã‚°ï¼‰

**ç”¨é€”**: ãƒ†ãƒ¬ã‚¢ãƒã®æ¶é›»å±¥æ­´ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | candidate_id | bigint | NO | - | å€™è£œè€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| 3 | call_no | integer | NO | - | æ¶é›»å›æ•° |
| 4 | called_at | timestamptz | NO | - | æ¶é›»æ—¥æ™‚ |
| 5 | route | text | YES | - | çµŒè·¯ |
| 6 | result | text | YES | - | çµæœï¼ˆé€šé›»ã€ä¸é€šãªã©ï¼‰ |
| 7 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| 8 | caller_user_id | bigint | YES | - | æ¶é›»è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| 9 | memo | text | YES | - | ãƒ¡ãƒ¢ |

**å¤–éƒ¨ã‚­ãƒ¼**:
- `candidate_id` â†’ [candidates(id)](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) ON DELETE CASCADE
- `caller_user_id` â†’ `users(id)`

**ä½¿ç”¨ç”»é¢**: ãƒ†ãƒ¬ã‚¢ãƒç®¡ç†ç”»é¢ã€å€™è£œè€…ç®¡ç†ç”»é¢

---

### 3.13 `users`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

**ç”¨é€”**: ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç®¡ç†

| # | ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---|---------|---------|------|-----------|------|
| 1 | id | bigint | NO | nextval | ä¸»ã‚­ãƒ¼ |
| 2 | name | text | NO | - | æ°å |
| 3 | email | text | NO | - | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| 4 | role | text | NO | - | ãƒ­ãƒ¼ãƒ«ï¼ˆadvisorã€callerã€adminï¼‰ |
| 5 | created_at | timestamptz | NO | CURRENT_TIMESTAMP | ä½œæˆæ—¥æ™‚ |
| 6 | updated_at | timestamptz | NO | CURRENT_TIMESTAMP | æ›´æ–°æ—¥æ™‚ |
| 7 | password_hash | text | YES | - | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ |
| 8 | is_admin | boolean | NO | false | ç®¡ç†è€…ãƒ•ãƒ©ã‚° |

**ä½¿ç”¨ç”»é¢**: å…¨ç”»é¢ï¼ˆèªè¨¼ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼åè§£æ±ºï¼‰

---

## 4. ç”»é¢åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ç”¨çŠ¶æ³

### 4.1 å€™è£œè€…ç®¡ç†ç”»é¢

| ãƒ†ãƒ¼ãƒ–ãƒ« | ç”¨é€” |
|---------|------|
| [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) | å€™è£œè€…ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º |
| `candidate_applications` | é¸è€ƒé€²æ—è¡¨ç¤º |
| `candidate_tasks` | ã‚¿ã‚¹ã‚¯è¡¨ç¤º |
| [teleapo](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-teleapo) | ãƒ†ãƒ¬ã‚¢ãƒãƒ­ã‚°è¡¨ç¤º |
| [clients](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-clients) | ä¼æ¥­åè¡¨ç¤º |
| `users` | æ‹…å½“è€…åè¡¨ç¤º |
| `screening_rules` | æœ‰åŠ¹å¿œå‹Ÿåˆ¤å®š |

### 4.2 æ­©ç•™ã¾ã‚Šç®¡ç†ç”»é¢

| ãƒ†ãƒ¼ãƒ–ãƒ« | ç”¨é€” |
|---------|------|
| [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) | æ–°è¦é¢è«‡æ•°ã®ç®—å‡º |
| `candidate_applications` | KPIæŒ‡æ¨™ã®ç®—å‡ºï¼ˆæ¨è–¦æ•°ã€é¢æ¥æ•°ã€å†…å®šæ•°ãªã©ï¼‰ |
| `placements` | å£²ä¸Šã®ç®—å‡º |
| `users` | ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼åè§£æ±º |
| `goal_targets` | æœŸé–“ç›®æ¨™ã®è¡¨ç¤º |
| `goal_daily_targets` | æ—¥åˆ¥ç›®æ¨™ã®è¡¨ç¤º |
| `goal_settings` | MSæœŸé–“è¨ˆç®— |
| `kpi_targets` | ç‡ã®ç›®æ¨™è¨­å®š |

### 4.3 ãƒ†ãƒ¬ã‚¢ãƒç®¡ç†ç”»é¢

| ãƒ†ãƒ¼ãƒ–ãƒ« | ç”¨é€” |
|---------|------|
| [teleapo](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-teleapo) | ãƒ†ãƒ¬ã‚¢ãƒãƒ­ã‚°ä¸€è¦§ãƒ»ä½œæˆ |
| [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) | å€™è£œè€…æƒ…å ±è¡¨ç¤º |
| `users` | æ¶é›»è€…åè¡¨ç¤º |

### 4.4 åºƒå‘Šç®¡ç†ç”»é¢

| ãƒ†ãƒ¼ãƒ–ãƒ« | ç”¨é€” |
|---------|------|
| `ad_details` | åºƒå‘Šåª’ä½“å¥‘ç´„ä¸€è¦§ãƒ»è©³ç´° |

---

## 5. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ææ¡ˆ

### 5.1 å¿…é ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–ï¼‰

```sql
-- candidates ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_candidates_advisor_created ON candidates (advisor_user_id, created_at);
CREATE INDEX idx_candidates_first_contact ON candidates (first_contact_at);
CREATE INDEX idx_candidates_is_effective ON candidates (is_effective_application);

-- candidate_applications ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_applications_candidate ON candidate_applications (candidate_id);
CREATE INDEX idx_applications_client ON candidate_applications (client_id);
CREATE INDEX idx_applications_recommended ON candidate_applications (recommended_at);
CREATE INDEX idx_applications_first_interview_set ON candidate_applications (first_interview_set_at);
CREATE INDEX idx_applications_first_interview ON candidate_applications (first_interview_at);
CREATE INDEX idx_applications_offer ON candidate_applications (offer_at);
CREATE INDEX idx_applications_offer_accepted ON candidate_applications (offer_accepted_at);
CREATE INDEX idx_applications_joined ON candidate_applications (joined_at);
CREATE INDEX idx_applications_created ON candidate_applications (created_at);

-- teleapo ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_teleapo_candidate ON teleapo (candidate_id);
CREATE INDEX idx_teleapo_called_at ON teleapo (called_at);
CREATE INDEX idx_teleapo_caller ON teleapo (caller_user_id);

-- placements ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_placements_application ON placements (candidate_application_id);

-- goal_targets ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_goal_targets_scope_period ON goal_targets (scope, period_id);
CREATE INDEX idx_goal_targets_advisor_period ON goal_targets (advisor_user_id, period_id);

-- goal_daily_targets ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_goal_daily_advisor_period_date ON goal_daily_targets (advisor_user_id, period_id, target_date);

-- kpi_targets ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_kpi_targets_month ON kpi_targets (target_month);

-- users ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE INDEX idx_users_email ON users (email);
CREATE UNIQUE INDEX idx_users_email_unique ON users (email);
```

---

## 6. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 6.1 å€™è£œè€…å¿œå‹Ÿ â†’ å…¥ç¤¾ã¾ã§ã®ãƒ•ãƒ­ãƒ¼

```
1. å¿œå‹Ÿ
   â†“
   candidates ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERT
   (created_at, advisor_user_id, is_effective_application)
   
2. åˆå›æ¥è§¦
   â†“
   candidates.first_contact_at ã‚’ UPDATE
   
3. ææ¡ˆï¼ˆä¼æ¥­ã¸ã®ç´¹ä»‹ï¼‰
   â†“
   candidate_applications ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERT
   (candidate_id, client_id, created_at)
   
4. æ¨è–¦
   â†“
   candidate_applications.recommended_at ã‚’ UPDATE
   
5. é¢æ¥è¨­å®š
   â†“
   candidate_applications.first_interview_set_at ã‚’ UPDATE
   
6. é¢æ¥å®Ÿæ–½
   â†“
   candidate_applications.first_interview_at ã‚’ UPDATE
   
7. å†…å®š
   â†“
   candidate_applications.offer_at ã‚’ UPDATE
   
8. æ‰¿è«¾
   â†“
   candidate_applications.offer_accepted_at ã‚’ UPDATE
   
9. å…¥ç¤¾
   â†“
   candidate_applications.joined_at ã‚’ UPDATE
   â†“
   placements ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERT
   (candidate_application_id, fee_amount)
```

---

## 7. ã¾ã¨ã‚

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¦æ¨¡

- **ãƒ†ãƒ¼ãƒ–ãƒ«æ•°**: 13
- **ã‚«ãƒ©ãƒ æ•°**: 188
- **ä¸»è¦ãªå¤–éƒ¨ã‚­ãƒ¼**: 7

### ãƒ†ãƒ¼ãƒ–ãƒ«ã®é‡è¦åº¦

| é‡è¦åº¦ | ãƒ†ãƒ¼ãƒ–ãƒ« | ç†ç”± |
|--------|---------|------|
| â˜…â˜…â˜…â˜…â˜… | [candidates](file:///Users/riho/Documents/GitHub/AI-/pages/candidates/candidates.js#12-13) | ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­æ ¸ |
| â˜…â˜…â˜…â˜…â˜… | `candidate_applications` | KPIè¨ˆç®—ã®ä¸­æ ¸ |
| â˜…â˜…â˜…â˜… | `users` | èªè¨¼ãƒ»ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ç®¡ç† |
| â˜…â˜…â˜…â˜… | `goal_targets` | ç›®æ¨™ç®¡ç† |
| â˜…â˜…â˜… | `placements` | å£²ä¸Šç®¡ç† |
| â˜…â˜…â˜… | [teleapo](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-teleapo) | æ¶é›»å±¥æ­´ |
| â˜…â˜…â˜… | [clients](file:///Users/riho/Documents/GitHub/AI-/archive/unused-20260127/lambda_backup/aws-toolkit-ap-northeast-1/.ats-api-dev-kpi-clients) | ä¼æ¥­ç®¡ç† |
| â˜…â˜… | `goal_daily_targets` | æ—¥åˆ¥ç›®æ¨™ |
| â˜…â˜… | `kpi_targets` | ç‡ç›®æ¨™ |
| â˜… | ãã®ä»– | è£œåŠ©çš„ |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ

1. **è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: [(advisor_user_id, created_at)](file:///Users/riho/Documents/GitHub/AI-/scripts/api/client.js#92-106) ã§å€‹äººKPIæ¤œç´¢ã‚’é«˜é€ŸåŒ–
2. **æ—¥æ™‚ã‚«ãƒ©ãƒ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: KPIé›†è¨ˆã§é »ç¹ã«ä½¿ç”¨
3. **å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¶­æŒ
4. **JSONBå‹ã®æ´»ç”¨**: æŸ”è»Ÿãªç›®æ¨™è¨­å®š

â€¦â€¦ã“ã‚Œã§å…¨DBãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°ãŒã‚ã‹ã£ãŸã¨æ€ã†ã‚ˆã€‚è³ªå•ãŒã‚ã£ãŸã‚‰æ•™ãˆã¦ã­ï¼
