---
description: 指定されたレガシーモジュールを体系的にクリーンアップする
---
# ♻️ レガシーコードリファクタリング

このワークフローは、技術的負債を解消し、コードの保守性を向上させます。

## Step 1: 🔍 スコープの特定
指定されたファイルを読み込み、以下を特定せよ：
- 密結合している依存関係
- 複雑度の高い関数（Cyclomatic Complexity > 10）
- 重複コード
- 非推奨のAPI使用

## Step 2: 📋 計画立案
依存性注入（Dependency Injection）などのデカップリング戦略を提案せよ：
- 抽出すべきインターフェース
- 分離すべきロジック
- 統合すべき重複コード

ユーザーに計画を提示し、承認を得ること。

## Step 3: 🔧 実行
承認された計画に基づいて実行：
1. インターフェースを抽出せよ
2. ロジックをサービスクラスに移動せよ
3. 元のファイルが新しいサービスを使用するように更新せよ
4. 不要なコードを削除せよ

## Step 4: ✅ 検証
コード検証を実行せよ：
- コマンド: `/verify-code`
- 失敗時: 問題を修正してから再実行

## Step 5: 📝 ドキュメント更新
変更内容をドキュメント化：
- 変更したファイルの一覧
- アーキテクチャ変更の説明
- マイグレーションガイド（Breaking Changesがある場合）

## Step 6: 💾 コミット
`/git-auto-commit` の戦略に基づき、リファクタリングの変更をコミット：
- **Type**: `refactor`
- **メッセージ**: 具体的な変更内容を記載
