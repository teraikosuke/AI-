<!-- 企業別実績テーブル -->
<div class="section-shell space-y-4">
  <div class="flex items-center justify-between">
    <h3 class="text-lg font-semibold text-slate-800 whitespace-nowrap">
      企業別実績
    </h3>
    <div class="flex items-center gap-3">
      <div class="flex items-center gap-2">
        <input type="text" id="referralCompanyFilter" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="企業名で検索..." />
        <select id="referralSortSelect" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm">
          <option value="company-asc">企業名（昇順）</option>
          <option value="remaining-asc">残り人数（昇順）</option>
          <option value="retention-desc">定着率（降順）</option>
          <option value="hired-desc">入社数（降順）</option>
        </select>
      </div>
      <button id="referralExportBtn" class="px-3 py-2 border border-slate-300 rounded-md text-sm hover:bg-slate-100 whitespace-nowrap">
        CSVエクスポート
      </button>
    </div>
  </div>

  <!-- フィルタ -->
  <div class="border border-slate-200 rounded-lg p-4 bg-slate-50 space-y-3">
    <h4 class="text-sm font-semibold text-slate-700">
      絞り込み条件
    </h4>
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 text-xs text-slate-500">
      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold text-slate-500">期間開始</label>
        <input type="date" id="referralDateStart" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm" value="2024-01-01" />
      </div>
      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold text-slate-500">期間終了</label>
        <input type="date" id="referralDateEnd" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm" value="2024-12-31" />
      </div>
      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold text-slate-500">職種</label>
        <select id="referralJobFilter" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm">
          <option value="">全て</option>
          <option value="エンジニア">エンジニア</option>
          <option value="営業">営業</option>
          <option value="マネージャー">マネージャー</option>
        </select>
      </div>
      <div class="flex items-end gap-2">
        <button id="referralFilterReset" class="px-3 py-2 border border-slate-300 rounded-md text-sm hover:bg-slate-100 whitespace-nowrap">
          条件をクリア
        </button>
        <div id="referralFilterCount" class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs font-semibold">
          -件
        </div>
      </div>
    </div>
  </div>

  <!-- テーブル -->
  <div class="overflow-auto rounded-lg border border-slate-200">
    <table class="table-grid min-w-[1500px]" id="referralTable">
      <thead>
        <tr>
          <th class="sticky left-0 bg-white z-10 cursor-pointer hover:bg-slate-100 sortable" data-sort="company">企業名</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="jobTitle">募集職種</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="planHeadcount">採用予定人数</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="remaining">残り人数</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="proposal">提案件数</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="docScreen">書類選考</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="interview1">一次面接</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="interview2">二次面接</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="offer">内定</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="joined">入社</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="retention">定着率</th>
          <th class="cursor-pointer hover:bg-slate-100 sortable" data-sort="prejoinDeclines">入社前辞退数</th>
        </tr>
      </thead>
      <tbody id="referralTableBody">
        <!-- JavaScriptで生成 -->
      </tbody>
    </table>
  </div>

  <!-- ページネーション -->
  <div class="flex items-center justify-between">
    <div class="flex items-center gap-2 text-sm text-slate-500">
      <button class="px-3 py-2 border border-slate-300 rounded-md text-sm hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed" id="referralPrevBtn" disabled>前のページ</button>
      <span class="px-3 py-2 text-sm" id="referralPageInfo">1 / 1</span>
      <button class="px-3 py-2 border border-slate-300 rounded-md text-sm hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed" id="referralNextBtn" disabled>次のページ</button>
    </div>
    <div class="flex items-center gap-2 text-sm">
      <label class="text-xs text-slate-500">表示件数</label>
      <select class="bg-white border border-slate-300 rounded-md px-3 py-2 text-sm" id="referralPageSize">
        <option value="25">25件</option>
        <option value="50" selected>50件</option>
        <option value="100">100件</option>
      </select>
    </div>
  </div>
</div>

<!-- AIマッチング -->
<div class="section-shell space-y-4">
  <h3 class="text-lg font-semibold text-slate-800 whitespace-nowrap">
    AIマッチング
  </h3>

  <!-- タブ切替 -->
  <div class="border-b border-slate-200">
    <nav class="-mb-px flex space-x-8">
      <button class="py-2 px-1 border-b-2 border-indigo-500 text-indigo-600 text-sm font-medium" id="matchTabCandidate">
        候補者を入力
      </button>
      <button class="py-2 px-1 border-b-2 border-transparent text-slate-500 hover:text-slate-700 text-sm font-medium" id="matchTabCondition">
        条件を入力
      </button>
    </nav>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- 候補者入力モード -->
    <div class="space-y-4" id="matchCandidatePanel">
      <div class="border border-slate-200 rounded-lg p-4 bg-slate-50">
        <h4 class="text-sm font-semibold text-slate-700 mb-3">
          候補者プロフィール
        </h4>
        <textarea id="candidateText" rows="6" class="w-full border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="候補者のプロフィール、スキル、経験等を入力してください..."></textarea>
        <div class="mt-3">
          <button id="matchFromCandidate" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500 text-sm font-medium">
            マッチング実行
          </button>
        </div>
      </div>
    </div>

    <!-- 条件入力モード -->
    <div class="space-y-4 hidden" id="matchConditionPanel">
      <div class="border border-slate-200 rounded-lg p-4 bg-slate-50">
        <h4 class="text-sm font-semibold text-slate-700 mb-3">
          募集条件
        </h4>
        <div class="space-y-3">
          <div class="grid grid-cols-2 gap-3">
            <label class="flex flex-col gap-1">
              <span class="text-xs font-semibold text-slate-600">年収下限（万円）</span>
              <input type="number" id="conditionSalaryMin" class="border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="400" />
            </label>
            <label class="flex flex-col gap-1">
              <span class="text-xs font-semibold text-slate-600">年収上限（万円）</span>
              <input type="number" id="conditionSalaryMax" class="border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="800" />
            </label>
          </div>
          <label class="flex flex-col gap-1">
            <span class="text-xs font-semibold text-slate-600">勤務地</span>
            <input type="text" id="conditionLocation" class="border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="東京都内、リモート可" />
          </label>
          <label class="flex flex-col gap-1">
            <span class="text-xs font-semibold text-slate-600">必要スキル・経験</span>
            <textarea id="conditionSkills" rows="3" class="border border-slate-300 rounded-md px-3 py-2 text-sm" placeholder="React, Node.js, 3年以上のエンジニア経験..."></textarea>
          </label>
          <div class="mt-3">
            <button id="matchFromCondition" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500 text-sm font-medium">
              マッチング実行
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- マッチング結果 -->
    <div class="space-y-4">
      <div class="border border-slate-200 rounded-lg p-4 bg-white">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm font-semibold text-slate-700">
            マッチング結果
          </h4>
          <select id="matchResultSort" class="bg-white border border-slate-300 rounded-md px-3 py-2 text-xs">
            <option value="score-desc">スコア（降順）</option>
            <option value="company-asc">企業名（昇順）</option>
          </select>
        </div>
        <div id="matchResults" class="space-y-3 min-h-[200px]">
          <div class="text-center text-slate-500 text-sm py-8">
            マッチング実行でここに結果が表示されます
          </div>
        </div>
      </div>
    </div>
  </div>
</div>